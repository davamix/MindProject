<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="MindProject.Desktop.Views.ProjectsView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:local="using:MindProject.Desktop.Views"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:controls="using:MindProject.Desktop.Views.Controls"
			 xmlns:ui="using:CommunityToolkit.WinUI"
			 mc:Ignorable="d">

	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" />
			<ColumnDefinition Width="3*" />
		</Grid.ColumnDefinitions>

		<!-- Project list -->
		<ListView x:Name="lsvProjects"
				  Grid.Column="0"
				  ItemsSource="{Binding Projects}"
				  SelectionMode="None"
				  IsItemClickEnabled="True">
			<ListView.ItemTemplate>
				<DataTemplate>
					<controls:ProjectItem Project="{Binding}"
										  Command="{Binding ElementName=lsvProjects, Path=DataContext.LoadProjectDetailsCommand}" />
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>

		<Button x:Name="btnAddProject"
				Grid.Column="0"
				VerticalAlignment="Bottom"
				HorizontalAlignment="Stretch"
				Style="{StaticResource AccentButtonStyle}"
				Padding="16"
				Margin="16"
				ToolTipService.ToolTip="Add new project"
				PointerEntered="btn_PointerEntered"
				PointerExited="btn_PointerExited"
				Click="btnAddProject_Click">
			<FontIcon Glyph="&#xE8A5;" />
		</Button>

		<!-- Notes list -->
		<ListView x:Name="lsvNotes"
				  Grid.Column="1"
				  ItemsSource="{Binding Notes}"
				  SelectionMode="None">
			<ListView.ItemTemplate>
				<DataTemplate>
					<controls:NoteItem Note="{Binding}"
									   SaveNote="{Binding ElementName=lsvNotes, Path=DataContext.SaveNoteCommand}"
									   DeleteNote="{Binding ElementName=lsvNotes, Path=DataContext.DeleteNoteCommand}" />
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>

		<Button x:Name="btnAddNote"
				Grid.Column="1"
				VerticalAlignment="Bottom"
				HorizontalAlignment="Right"
				Style="{StaticResource AccentButtonStyle}"
				Padding="16"
				Margin="16"
				CornerRadius="50"
				PointerEntered="btn_PointerEntered"
				PointerExited="btn_PointerExited"
				Click="btnAddNote_Click">
			<FontIcon Glyph="&#xE70B;"
					  FontSize="28" />
		</Button>

		<!-- Note input dialog -->
		<controls:NoteInput x:Name="noteInputControl"
							Grid.Column="0"
							Grid.ColumnSpan="2"
							VerticalAlignment="Stretch"
							HorizontalAlignment="Stretch"
							Visibility="Collapsed"
							SaveNote="{Binding SaveNoteCommand}"
							Project="{Binding SelectedProject}" />

		<!-- Project input control -->
		<controls:ProjectInput x:Name="projectInputControl"
							   Grid.Column="0"
							   Grid.ColumnSpan="2"
							   VerticalAlignment="Stretch"
							   HorizontalAlignment="Stretch"
							   Visibility="Collapsed"
							   SaveProject="{Binding SaveProjectCommand}" />

	</Grid>
</UserControl>
